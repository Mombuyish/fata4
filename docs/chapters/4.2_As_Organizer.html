
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>4.2 As Organizer 作为管理工具 · Laravel - 从百草园到三味书屋</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="original Taylor Otwell, translate zgldh">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="4.3_Booting_Providers.html" />
    
    
    <link rel="prev" href="4.1_As_Bootstrapper.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="Author's_Note.html">
            
                <a href="Author's_Note.html">
            
                    
                    Author's Note 作者自序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    1 Dependency Injection 依赖注入
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="1.1_The_Problem.html">
            
                <a href="1.1_The_Problem.html">
            
                    
                    1.1 The Problem 遇到的问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="1.2_Build_A_Contract.html">
            
                <a href="1.2_Build_A_Contract.html">
            
                    
                    1.2 Build A Contract 建立约定
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="1.3_Take_It_further.html">
            
                <a href="1.3_Take_It_further.html">
            
                    
                    1.3 Take It further 更进一步
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="1.4_Too_Much_Java.html">
            
                <a href="1.4_Too_Much_Java.html">
            
                    
                    1.4 Too Much Java? 太像Java了？
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    2 The IoC Container 控制反转容器
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="2.1_Basic_Binding.html">
            
                <a href="2.1_Basic_Binding.html">
            
                    
                    2.1 Basic Binding 基础绑定
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="2.2_Reflective_Resolution.html">
            
                <a href="2.2_Reflective_Resolution.html">
            
                    
                    2.2 Reflective Resolution 反射解决方案
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <span>
            
                    
                    3 Interface As Contract 接口约定
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="3.1_Strong_Typing_&_Water_Fowl.html">
            
                <a href="3.1_Strong_Typing_&_Water_Fowl.html">
            
                    
                    3.1 Strong Typing & Water Fowl 强类型和小鸭子
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="3.2_A_Contract_Example.html">
            
                <a href="3.2_A_Contract_Example.html">
            
                    
                    3.2 A Contract Example 约定的范例
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="3.3_Interface_&_Team_Development.html">
            
                <a href="3.3_Interface_&_Team_Development.html">
            
                    
                    3.3 Interface & Team Development 接口与团队开发
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <span>
            
                    
                    4 Service Provider 服务提供者
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="4.1_As_Bootstrapper.html">
            
                <a href="4.1_As_Bootstrapper.html">
            
                    
                    4.1 As Bootstrapper 他是引导程序
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.6.2" data-path="4.2_As_Organizer.html">
            
                <a href="4.2_As_Organizer.html">
            
                    
                    4.2 As Organizer 作为管理工具
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="4.3_Booting_Providers.html">
            
                <a href="4.3_Booting_Providers.html">
            
                    
                    4.3 Booting Providers 服务提供者的启动过程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="4.4_Providing_The_Core.html">
            
                <a href="4.4_Providing_The_Core.html">
            
                    
                    4.4 Providing The Core 核心也是服务提供者的模式
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" >
            
                <span>
            
                    
                    5 Application Structure 应用结构
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="5.1_Introduction.html">
            
                <a href="5.1_Introduction.html">
            
                    
                    5.1 Introduction 介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="5.2_MVC_Is_Killing_You.html">
            
                <a href="5.2_MVC_Is_Killing_You.html">
            
                    
                    5.2 MVC Is Killing You MVC是慢性谋杀
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="5.3_Bye_Models.html">
            
                <a href="5.3_Bye_Models.html">
            
                    
                    5.3 Bye, Bye Models 再见，模型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="5.4_It's_All_About_The_Layers.html">
            
                <a href="5.4_It's_All_About_The_Layers.html">
            
                    
                    5.4 It's All About The Layers 核心思想就是分层
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="5.5_Where_To_Put_Stuff.html">
            
                <a href="5.5_Where_To_Put_Stuff.html">
            
                    
                    5.5 Where To Put "Stuff" 东西都放哪儿？
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" >
            
                <span>
            
                    
                    6 Applied Architecture: Decoupling Handles 实用做法：解耦处理函数
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="6.1_Introduction.html">
            
                <a href="6.1_Introduction.html">
            
                    
                    6.1 Introduction 介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="6.2_Decoupling_Handlers.html">
            
                <a href="6.2_Decoupling_Handlers.html">
            
                    
                    6.2 Decoupling Handlers 解耦处理函数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="6.3_Other_Handlers.html">
            
                <a href="6.3_Other_Handlers.html">
            
                    
                    6.3 Other Handlers 其他处理函数
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" >
            
                <span>
            
                    
                    7 Extending The Framework 扩展框架
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="7.1_Introduction.html">
            
                <a href="7.1_Introduction.html">
            
                    
                    7.1 Introduction 介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="7.2_Managers_&_Factories.html">
            
                <a href="7.2_Managers_&_Factories.html">
            
                    
                    7.2 Managers & Factories 管理者和工厂
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="7.3_Cache.html">
            
                <a href="7.3_Cache.html">
            
                    
                    7.3 Cache 缓存
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="7.4_Session.html">
            
                <a href="7.4_Session.html">
            
                    
                    7.4 Session 会话
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="7.5_Authentication.html">
            
                <a href="7.5_Authentication.html">
            
                    
                    7.5 Authentication 身份认证
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.6" data-path="7.6_IoC_Based_Extension.html">
            
                <a href="7.6_IoC_Based_Extension.html">
            
                    
                    7.6 IoC Based Extension 使用容器进行扩展
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.7" data-path="7.7_Request_Extension.html">
            
                <a href="7.7_Request_Extension.html">
            
                    
                    7.7 Request Extension 请求的扩展
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" >
            
                <span>
            
                    
                    8 Single Responsibility Principle 单一职责原则
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="8.1_Introduction.html">
            
                <a href="8.1_Introduction.html">
            
                    
                    8.1 Introduction 介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="8.2_In_Action.html">
            
                <a href="8.2_In_Action.html">
            
                    
                    8.2 In Action 实践
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" >
            
                <span>
            
                    
                    9 Open Closed Principle 开放封闭原则
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="9.1_Introduction.html">
            
                <a href="9.1_Introduction.html">
            
                    
                    9.1 Introduction 介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="9.2_In_Action.html">
            
                <a href="9.2_In_Action.html">
            
                    
                    9.2 In Action 实践
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" >
            
                <span>
            
                    
                    10 Liskov Substitution Principle 里氏替换原则
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="10.1_Introduction.html">
            
                <a href="10.1_Introduction.html">
            
                    
                    10.1 Introduction 介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="10.2_In_Action.html">
            
                <a href="10.2_In_Action.html">
            
                    
                    10.2 In Action 实践
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" >
            
                <span>
            
                    
                    11 Interface Segregation Principle 接口隔离原则
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="11.1_Introduction.html">
            
                <a href="11.1_Introduction.html">
            
                    
                    11.1 Introduction 介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="11.2_In_Action.html">
            
                <a href="11.2_In_Action.html">
            
                    
                    11.2 In Action 实践
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" >
            
                <span>
            
                    
                    12 Dependency Inversion Principle 依赖反转原则
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" data-path="12.1_Introduction.html">
            
                <a href="12.1_Introduction.html">
            
                    
                    12.1 Introduction 介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2" data-path="12.2_In_Action.html">
            
                <a href="12.2_In_Action.html">
            
                    
                    12.2 In Action 实践
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >4.2 As Organizer 作为管理工具</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="as-organizer-&#x4F5C;&#x4E3A;&#x7BA1;&#x7406;&#x5DE5;&#x5177;">As Organizer &#x4F5C;&#x4E3A;&#x7BA1;&#x7406;&#x5DE5;&#x5177;</h1>
<p>One of the keys to building a well architected Laravel application is learning to use service providers as an organizational tool. When you are registering many classes with the IoC container, all of those bindings can start to clutter your app/start files. Instead of doing container registerations in those files, create service providers that register related services.</p>
<p>&#x60F3;&#x5236;&#x4F5C;&#x4E00;&#x4E2A;&#x7ED3;&#x6784;&#x4F18;&#x7F8E;&#x7684; Laravel &#x5E94;&#x7528;&#x7684;&#x8BDD;&#xFF0C;&#x5C31;&#x8981;&#x53BB;&#x5B66;&#x4E60;&#x5982;&#x4F55;&#x7528;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x8005;&#x6765;&#x7BA1;&#x7406;&#x4EE3;&#x7801;&#x3002;&#x5F53;&#x4F60;&#x5728;&#x6CE8;&#x518C; IoC &#x7ED1;&#x5B9A;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6240;&#x6709;&#x4EE3;&#x7801;&#x90FD;&#x6742;&#x4E71;&#x7684;&#x585E;&#x8FDB;&#x4E86;app/start &#x8DEF;&#x5F84;&#x4E0B;&#x7684;&#x6587;&#x4EF6;&#x91CC;&#x3002; &#x522B;&#x518D;&#x8FD9;&#x6837;&#x505A;&#x4E86;&#xFF0C;&#x4F7F;&#x7528;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x8005;&#x6765;&#x6CE8;&#x518C;&#x8FD9;&#x4E9B;&#x5427;&#x3002;</p>
<blockquote>
<h3 id="get-it-started-&#x4E07;&#x7269;&#x4E4B;&#x521D;">Get It Started &#x4E07;&#x7269;&#x4E4B;&#x521D;</h3>
<p>Your application&apos;s &quot;start&quot; files are all stored in the app/start directory. These are &quot;bootstrap&quot; files that are loaded based on the type of the request entering your application. Start files named after an environment are loaded after the global start.php file. Finally, the artisan.php start file is loaded when any console command is executed.</p>
<p>&#x4F60;&#x5E94;&#x7528;&#x7684;&#x201C;&#x542F;&#x52A8;&#x201D;&#x6587;&#x4EF6;&#x90FD;&#x50A8;&#x5B58;&#x5728; app/start &#x76EE;&#x5F55;&#x4E0B;&#x3002;&#x6839;&#x636E;&#x4E0D;&#x540C;&#x7684;&#x8BF7;&#x6C42;&#x5165;&#x53E3;&#xFF0C;&#x7CFB;&#x7EDF;&#x4F1A;&#x8F7D;&#x5165;&#x4E0D;&#x540C;&#x7684;&#x542F;&#x52A8;&#x6587;&#x4EF6;&#x3002;&#x5728;&#x5168;&#x5C40;&#x7684; start.php &#x6587;&#x4EF6;&#x52A0;&#x8F7D;&#x540E;&#xFF0C;&#x7CFB;&#x7EDF;&#x4F1A;&#x6839;&#x636E;&#x6267;&#x884C;&#x73AF;&#x5883;&#x7684;&#x4E0D;&#x540C;&#x6765;&#x52A0;&#x8F7D;&#x4E0D;&#x540C;&#x7684;&#x542F;&#x52A8;&#x6587;&#x4EF6;&#x3002; &#x6B64;&#x5916;&#xFF0C;&#x5728;&#x6267;&#x884C;&#x547D;&#x4EE4;&#x884C;&#x7A0B;&#x5E8F;&#x65F6;&#xFF0C;artisan.php &#x6587;&#x4EF6;&#x4F1A;&#x88AB;&#x8F7D;&#x5165;&#x3002;</p>
</blockquote>
<p>Let&apos;s explore an example. Perhaps our application is using Pusher to push messages to clients via WebSockets. In order to decouple ourselves from Pusher, it will be benificial to create an EventPusherInterface, and a PusherEventPusher implementation. This will allow us to easily change WebSocket providers down the road as requirements change or our application grows.</p>
<p>&#x54B1;&#x4EEC;&#x6765;&#x8003;&#x8651;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x3002;&#x4E5F;&#x8BB8;&#x6211;&#x4EEC;&#x7684;&#x5E94;&#x7528;&#x6B63;&#x5728;&#x4F7F;&#x7528; Pusher &#x6765;&#x4E3A;&#x5BA2;&#x6237;&#x63A8;&#x9001;&#x6D88;&#x606F;&#x3002;&#x4E3A;&#x4E86;&#x5C06;&#x6211;&#x4EEC;&#x7684;&#x5E94;&#x7528;&#x548C; Pusher &#x89E3;&#x8026;&#xFF0C;&#x6211;&#x4EEC;&#x8981;&#x5B9A;&#x4E49; EventPusherInterface &#x63A5;&#x53E3;&#x548C;&#x5BF9;&#x5E94;&#x7684;&#x5B9E;&#x73B0;&#x7C7B; PusherEventPusher &#x3002;&#x8FD9;&#x6837;&#x5728;&#x9700;&#x6C42;&#x53D8;&#x5316;&#x6216;&#x5E94;&#x7528;&#x6539;&#x8FDB;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x968F;&#x65F6;&#x8F7B;&#x677E;&#x7684;&#x6539;&#x53D8;&#x63A8;&#x9001;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x5546;&#x3002;</p>
<pre><code class="lang-php"><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">EventPusherInterface</span></span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">push</span><span class="hljs-params">($message, array $data = array<span class="hljs-params">()</span>)</span></span>;
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PusherEventPusher</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">EventPusherInterface</span></span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">(PusherSdk $pusher)</span>
    </span>{
        $this-&gt;pusher = $pusher;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">push</span><span class="hljs-params">($message, array $data = array<span class="hljs-params">()</span>)</span>
    </span>{
        <span class="hljs-comment">// Push message via the Pusher SDK...</span>
    }
}
</code></pre>
<p>Next, let&apos;s create an EventPusherServiceProvider:</p>
<p>&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x521B;&#x5EFA;&#x4E00;&#x4E2A; EventPusherServiceProvider&#xFF1A;</p>
<pre><code class="lang-php"><span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Support</span>\<span class="hljs-title">ServiceProvider</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EventPusherServiceProvider</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ServiceProvider</span> </span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">register</span><span class="hljs-params">()</span>
    </span>{
        $this-&gt;app-&gt;singleton(<span class="hljs-string">&apos;PusherSdk&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
        </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> PusherSdk(<span class="hljs-string">&apos;app-key&apos;</span>, <span class="hljs-string">&apos;secret-key&apos;</span>);
        }

        $this-&gt;app-&gt;singleton(<span class="hljs-string">&apos;EventPusherInterface&apos;</span>, <span class="hljs-string">&apos;PusherEventPusher&apos;</span>);
    }
}
</code></pre>
<p>Great! Now we have a clean abstraction over event pushing, as well as a convenient place to register this, and other related bindings, in the container. Finally, we just need to add the EventPusherServiceProvider to our providers array in the app/config/app.php configuration file. Now we are ready to inject the EventPusherInterface into any controller or class within our application.</p>
<p>&#x5F88;&#x597D;&#xFF01; &#x6211;&#x4EEC;&#x5BF9;&#x4E8B;&#x4EF6;&#x63A8;&#x9001;&#x8FDB;&#x884C;&#x4E86;&#x6E05;&#x6670;&#x7684;&#x62BD;&#x8C61;&#xFF0C;&#x540C;&#x65F6;&#x6211;&#x4EEC;&#x4E5F;&#x6709;&#x4E86;&#x4E00;&#x4E2A;&#x5F88;&#x4E0D;&#x9519;&#x7684;&#x5730;&#x65B9;&#x8FDB;&#x884C;&#x6CE8;&#x518C;&#x3001;&#x7ED1;&#x5B9A;&#x5176;&#x4ED6;&#x76F8;&#x5173;&#x7684;&#x4E1C;&#x897F;&#x5230;&#x5BB9;&#x5668;&#x91CC;&#x3002;&#x6700;&#x540E;&#x4E00;&#x6B65;&#x53EA;&#x9700;&#x8981;&#x5C06; EventPusherServiceProvider &#x5199;&#x5165; app/config/app.php &#x6587;&#x4EF6;&#x5185;&#x7684; providers &#x6570;&#x7EC4;&#x91CC;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;&#x73B0;&#x5728;&#x8FD9;&#x4E2A;&#x5E94;&#x7528;&#x91CC;&#x7684; EventPusherInterface &#x5DF2;&#x7ECF;&#x88AB;&#x7ED1;&#x5B9A;&#x5230;&#x4E86;&#x6B63;&#x786E;&#x7684;&#x5B9E;&#x73B0;&#x7C7B;&#x4E0A;&#x3002;</p>
<blockquote>
<h3 id="should-you-singleton-&#x8981;&#x4F7F;&#x7528;&#x5355;&#x4F8B;&#x4E48;&#xFF1F;">Should You Singleton? &#x8981;&#x4F7F;&#x7528;&#x5355;&#x4F8B;&#x4E48;&#xFF1F;</h3>
<p>You will need to evaluate whether to bind classes with bind or singleton. If you only want one instance of the class to be created per request cycle, use singleton. Otherwise, use bind.</p>
<p>&#x7528;&#x4E0D;&#x7528;&#x5355;&#x4F8B;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x6765;&#x8003;&#x8651;&#xFF1A;&#x5982;&#x679C;&#x5728;&#x4E00;&#x6B21;&#x8BF7;&#x6C42;&#x5468;&#x671F;&#x4E2D;&#x8BE5;&#x7C7B;&#x53EA;&#x9700;&#x8981;&#x6709;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;&#xFF0C;&#x5C31;&#x4F7F;&#x7528;singleton&#xFF1B;&#x5426;&#x5219;&#x5C31;&#x4F7F;&#x7528;bind&#x3002;</p>
</blockquote>
<p>Note that a service provider has an $app instance available via the base ServiceProvider class. This is a full Illuminate\Foundation\Application instance, which inherits from the Container class, so we can call all of the IoC container methods we are used to. If you preffer to use the App facade inside the service provider, you may do that as well:</p>
<pre><code class="lang-php">    App::singleton(<span class="hljs-string">&apos;EventPusherInterface&apos;</span>, <span class="hljs-string">&apos;PusherEventPusher&apos;</span>);
</code></pre>
<p>Of course, service providers are not limited to registering certain kinds of services. We could use them to register our cloud file storage services, database access services, a custom view engine such as Twig, etc. They are simply bootstrapping and organizational tools for your application. Nothing more.</p>
<p>&#x5F53;&#x7136;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x8005;&#x7684;&#x529F;&#x80FD;&#x4E0D;&#x4EC5;&#x4EC5;&#x5C40;&#x9650;&#x4E8E;&#x6D88;&#x606F;&#x63A8;&#x9001;&#x3002;&#x50CF;&#x662F;&#x4E91;&#x5B58;&#x50A8;&#x3001;&#x6570;&#x636E;&#x5E93;&#x8BBF;&#x95EE;&#x3001;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x89C6;&#x56FE;&#x5F15;&#x64CE;&#x6BD4;&#x5982; Twig &#x7B49;&#x7B49;&#x90FD;&#x53EF;&#x4EE5;&#x7528;&#x8FD9;&#x79CD;&#x6A21;&#x5F0F;&#x6765;&#x8BBE;&#x7F6E;&#x3002;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x8005;&#x5C31;&#x662F;&#x4F60;&#x7684;&#x5E94;&#x7528;&#x91CC;&#x7684;&#x542F;&#x52A8;&#x4EE3;&#x7801;&#x548C;&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#xFF0C;&#x6CA1;&#x4EC0;&#x4E48;&#x795E;&#x5947;&#x7684;&#x3002;</p>
<p>So, don&apos;t be scared to create your own service providers. They are not something that should be strictly limited to distributed packages, but rather are great organizational tools for your own applications. Be creative and use them to bootstrap your various application components.</p>
<p>&#x6240;&#x4EE5;&#x5927;&#x80C6;&#x7684;&#x53BB;&#x521B;&#x5EFA;&#x4F60;&#x81EA;&#x5DF1;&#x7684;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x8005;&#x3002;&#x5E76;&#x4E0D;&#x662F;&#x4F60;&#x975E;&#x8981;&#x53D1;&#x5E03;&#x4E2A;&#x4EC0;&#x4E48;&#x8F6F;&#x4EF6;&#x5305;&#x624D;&#x9700;&#x8981;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x8005;&#xFF0C;&#x4ED6;&#x4EEC;&#x53EA;&#x662F;&#x975E;&#x5E38;&#x597D;&#x7684;&#x7BA1;&#x7406;&#x4EE3;&#x7801;&#x7684;&#x5DE5;&#x5177;&#x3002;&#x4F7F;&#x7528;&#x5B83;&#x4EEC;&#x7684;&#x529B;&#x91CF;&#x53BB;&#x7BA1;&#x7406;&#x597D;&#x5E94;&#x7528;&#x4E2D;&#x7684;&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;&#x5427;&#x3002;</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="4.1_As_Bootstrapper.html" class="navigation navigation-prev " aria-label="Previous page: 4.1 As Bootstrapper 他是引导程序">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="4.3_Booting_Providers.html" class="navigation navigation-next " aria-label="Next page: 4.3 Booting Providers 服务提供者的启动过程">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"4.2 As Organizer 作为管理工具","level":"1.6.2","depth":2,"next":{"title":"4.3 Booting Providers 服务提供者的启动过程","level":"1.6.3","depth":2,"path":"chapters/4.3_Booting_Providers.md","ref":"./chapters/4.3_Booting_Providers.md","articles":[]},"previous":{"title":"4.1 As Bootstrapper 他是引导程序","level":"1.6.1","depth":2,"path":"chapters/4.1_As_Bootstrapper.md","ref":"./chapters/4.1_As_Bootstrapper.md","articles":[]},"dir":"ltr"},"config":{"plugins":[],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"original Taylor Otwell, translate zgldh","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Laravel - 从百草园到三味书屋","language":"zh-hans","gitbook":"*"},"file":{"path":"chapters/4.2_As_Organizer.md","mtime":"2019-01-07T14:20:21.796Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-01-07T16:06:05.085Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

