
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>5.3 Bye, Bye Models 再见，模型 · Laravel - 从百草园到三味书屋</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="original Taylor Otwell, translate zgldh">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="5.4_It's_All_About_The_Layers.html" />
    
    
    <link rel="prev" href="5.2_MVC_Is_Killing_You.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="Author's_Note.html">
            
                <a href="Author's_Note.html">
            
                    
                    Author's Note 作者自序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    1 Dependency Injection 依赖注入
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="1.1_The_Problem.html">
            
                <a href="1.1_The_Problem.html">
            
                    
                    1.1 The Problem 遇到的问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="1.2_Build_A_Contract.html">
            
                <a href="1.2_Build_A_Contract.html">
            
                    
                    1.2 Build A Contract 建立约定
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="1.3_Take_It_further.html">
            
                <a href="1.3_Take_It_further.html">
            
                    
                    1.3 Take It further 更进一步
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="1.4_Too_Much_Java.html">
            
                <a href="1.4_Too_Much_Java.html">
            
                    
                    1.4 Too Much Java? 太像Java了？
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    2 The IoC Container 控制反转容器
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="2.1_Basic_Binding.html">
            
                <a href="2.1_Basic_Binding.html">
            
                    
                    2.1 Basic Binding 基础绑定
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="2.2_Reflective_Resolution.html">
            
                <a href="2.2_Reflective_Resolution.html">
            
                    
                    2.2 Reflective Resolution 反射解决方案
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <span>
            
                    
                    3 Interface As Contract 接口约定
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="3.1_Strong_Typing_&_Water_Fowl.html">
            
                <a href="3.1_Strong_Typing_&_Water_Fowl.html">
            
                    
                    3.1 Strong Typing & Water Fowl 强类型和小鸭子
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="3.2_A_Contract_Example.html">
            
                <a href="3.2_A_Contract_Example.html">
            
                    
                    3.2 A Contract Example 约定的范例
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="3.3_Interface_&_Team_Development.html">
            
                <a href="3.3_Interface_&_Team_Development.html">
            
                    
                    3.3 Interface & Team Development 接口与团队开发
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <span>
            
                    
                    4 Service Provider 服务提供者
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="4.1_As_Bootstrapper.html">
            
                <a href="4.1_As_Bootstrapper.html">
            
                    
                    4.1 As Bootstrapper 他是引导程序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="4.2_As_Organizer.html">
            
                <a href="4.2_As_Organizer.html">
            
                    
                    4.2 As Organizer 作为管理工具
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="4.3_Booting_Providers.html">
            
                <a href="4.3_Booting_Providers.html">
            
                    
                    4.3 Booting Providers 服务提供者的启动过程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="4.4_Providing_The_Core.html">
            
                <a href="4.4_Providing_The_Core.html">
            
                    
                    4.4 Providing The Core 核心也是服务提供者的模式
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" >
            
                <span>
            
                    
                    5 Application Structure 应用结构
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="5.1_Introduction.html">
            
                <a href="5.1_Introduction.html">
            
                    
                    5.1 Introduction 介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="5.2_MVC_Is_Killing_You.html">
            
                <a href="5.2_MVC_Is_Killing_You.html">
            
                    
                    5.2 MVC Is Killing You MVC是慢性谋杀
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.7.3" data-path="5.3_Bye_Models.html">
            
                <a href="5.3_Bye_Models.html">
            
                    
                    5.3 Bye, Bye Models 再见，模型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="5.4_It's_All_About_The_Layers.html">
            
                <a href="5.4_It's_All_About_The_Layers.html">
            
                    
                    5.4 It's All About The Layers 核心思想就是分层
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="5.5_Where_To_Put_Stuff.html">
            
                <a href="5.5_Where_To_Put_Stuff.html">
            
                    
                    5.5 Where To Put "Stuff" 东西都放哪儿？
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" >
            
                <span>
            
                    
                    6 Applied Architecture: Decoupling Handles 实用做法：解耦处理函数
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="6.1_Introduction.html">
            
                <a href="6.1_Introduction.html">
            
                    
                    6.1 Introduction 介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="6.2_Decoupling_Handlers.html">
            
                <a href="6.2_Decoupling_Handlers.html">
            
                    
                    6.2 Decoupling Handlers 解耦处理函数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="6.3_Other_Handlers.html">
            
                <a href="6.3_Other_Handlers.html">
            
                    
                    6.3 Other Handlers 其他处理函数
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" >
            
                <span>
            
                    
                    7 Extending The Framework 扩展框架
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="7.1_Introduction.html">
            
                <a href="7.1_Introduction.html">
            
                    
                    7.1 Introduction 介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="7.2_Managers_&_Factories.html">
            
                <a href="7.2_Managers_&_Factories.html">
            
                    
                    7.2 Managers & Factories 管理者和工厂
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="7.3_Cache.html">
            
                <a href="7.3_Cache.html">
            
                    
                    7.3 Cache 缓存
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="7.4_Session.html">
            
                <a href="7.4_Session.html">
            
                    
                    7.4 Session 会话
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="7.5_Authentication.html">
            
                <a href="7.5_Authentication.html">
            
                    
                    7.5 Authentication 身份认证
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.6" data-path="7.6_IoC_Based_Extension.html">
            
                <a href="7.6_IoC_Based_Extension.html">
            
                    
                    7.6 IoC Based Extension 使用容器进行扩展
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.7" data-path="7.7_Request_Extension.html">
            
                <a href="7.7_Request_Extension.html">
            
                    
                    7.7 Request Extension 请求的扩展
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" >
            
                <span>
            
                    
                    8 Single Responsibility Principle 单一职责原则
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="8.1_Introduction.html">
            
                <a href="8.1_Introduction.html">
            
                    
                    8.1 Introduction 介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="8.2_In_Action.html">
            
                <a href="8.2_In_Action.html">
            
                    
                    8.2 In Action 实践
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" >
            
                <span>
            
                    
                    9 Open Closed Principle 开放封闭原则
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="9.1_Introduction.html">
            
                <a href="9.1_Introduction.html">
            
                    
                    9.1 Introduction 介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="9.2_In_Action.html">
            
                <a href="9.2_In_Action.html">
            
                    
                    9.2 In Action 实践
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" >
            
                <span>
            
                    
                    10 Liskov Substitution Principle 里氏替换原则
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="10.1_Introduction.html">
            
                <a href="10.1_Introduction.html">
            
                    
                    10.1 Introduction 介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="10.2_In_Action.html">
            
                <a href="10.2_In_Action.html">
            
                    
                    10.2 In Action 实践
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" >
            
                <span>
            
                    
                    11 Interface Segregation Principle 接口隔离原则
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="11.1_Introduction.html">
            
                <a href="11.1_Introduction.html">
            
                    
                    11.1 Introduction 介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="11.2_In_Action.html">
            
                <a href="11.2_In_Action.html">
            
                    
                    11.2 In Action 实践
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" >
            
                <span>
            
                    
                    12 Dependency Inversion Principle 依赖反转原则
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" data-path="12.1_Introduction.html">
            
                <a href="12.1_Introduction.html">
            
                    
                    12.1 Introduction 介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2" data-path="12.2_In_Action.html">
            
                <a href="12.2_In_Action.html">
            
                    
                    12.2 In Action 实践
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >5.3 Bye, Bye Models 再见，模型</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="bye-bye-models-&#x518D;&#x89C1;&#xFF0C;&#x6A21;&#x578B;">Bye, Bye Models &#x518D;&#x89C1;&#xFF0C;&#x6A21;&#x578B;</h1>
<p>Is your models directory deleted yet? If not, get it out of there! Let&apos;s create a folder within our app directory that is simply named after our application. For this discussion, let&apos;s call our application QuickBill, and we&apos;ll continue to use some of the interfaces and classes we&apos;ve discussed before.</p>
<p>&#x5220;&#x6389;&#x4F60;&#x7684; models &#x76EE;&#x5F55;&#x4E86;&#x4E48;&#xFF1F;&#x8FD8;&#x6CA1;&#x5220;&#x5C31;&#x8D76;&#x7D27;&#x5220;&#x4E86;&#xFF01;&#x6211;&#x4EEC;&#x5C06;&#x8981;&#x5728; app &#x76EE;&#x5F55;&#x4E0B;&#x521B;&#x5EFA;&#x4E2A;&#x65B0;&#x7684;&#x76EE;&#x5F55;&#xFF0C;&#x76EE;&#x5F55;&#x540D;&#x5C31;&#x4EE5;&#x6211;&#x4EEC;&#x8FD9;&#x4E2A;&#x5E94;&#x7528;&#x7684;&#x540D;&#x5B57;&#x6765;&#x547D;&#x540D;&#xFF0C;&#x8FD9;&#x6B21;&#x6211;&#x4EEC;&#x5C31;&#x53EB; QuickBill &#x5427;&#x3002;&#x5728;&#x540E;&#x7EED;&#x7684;&#x8BA8;&#x8BBA;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x524D;&#x9762;&#x5199;&#x7684;&#x90A3;&#x4E9B;&#x63A5;&#x53E3;&#x548C;&#x7C7B;&#x90FD;&#x4F1A;&#x51FA;&#x73B0;&#x3002;</p>
<blockquote>
<h3 id="remember-the-context-&#x6CE8;&#x610F;&#x4F7F;&#x7528;&#x573A;&#x666F;">Remember The Context &#x6CE8;&#x610F;&#x4F7F;&#x7528;&#x573A;&#x666F;</h3>
<p>Remember, if you are building a very small Laravel application, throwing a few Eloquent models in the models directory perfectly fine. In this chapter, we&apos;re primarily concerned with discovering more &quot;layered&quot; architecture suitable to large and complex projects.</p>
<p>&#x8BB0;&#x4F4F;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x5728;&#x5199;&#x4E00;&#x4E2A;&#x5F88;&#x5C0F;&#x7684; Laravel &#x5E94;&#x7528;&#xFF0C;&#x90A3;&#x5728; models &#x76EE;&#x5F55;&#x4E0B;&#x5199;&#x51E0;&#x4E2A; Eloquent &#x6A21;&#x578B;&#x5176;&#x5B9E;&#x633A;&#x5408;&#x9002;&#x7684;&#x3002;&#x4F46;&#x5728;&#x672C;&#x7AE0;&#x8282;&#xFF0C;&#x6211;&#x4EEC;&#x4E3B;&#x8981;&#x5173;&#x6CE8;&#x5982;&#x4F55;&#x5F00;&#x53D1;&#x66F4;&#x6709;&#x5408;&#x9002;&#x201C;&#x5C42;&#x6B21;&#x201D;&#x67B6;&#x6784;&#x7684;&#x5927;&#x578B;&#x590D;&#x6742;&#x9879;&#x76EE;&#x3002;</p>
</blockquote>
<p>So, we should have an app/QuickBill directory, which is at the same level in the application directory structure as controllers and views. We can create several more directories within QuickBill. Let&apos;s create a Repositories directory and a Billing directory. Once these directories are established, remember to register them for PSR-0 auto-loading in your composer.json file:</p>
<p>&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x73B0;&#x5728;&#x6709;&#x4E86;&#x4E2A; app/QuickBill &#x76EE;&#x5F55;&#xFF0C;&#x5B83;&#x548C;&#x5E94;&#x7528;&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x5176;&#x4ED6;&#x76EE;&#x5F55;&#x5982; controllers &#x8FD8;&#x6709; views &#x90FD;&#x662F;&#x5E73;&#x7EA7;&#x7684;&#x3002;&#x5728; QuickBill &#x76EE;&#x5F55;&#x4E0B;&#x6211;&#x4EEC;&#x8FD8;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x51E0;&#x4E2A;&#x5176;&#x4ED6;&#x7684;&#x76EE;&#x5F55;&#x3002;&#x6211;&#x4EEC;&#x6765;&#x5728;&#x91CC;&#x9762;&#x521B;&#x5EFA;&#x4E2A; Repositories &#x548C; Billing &#x76EE;&#x5F55;&#x3002;&#x76EE;&#x5F55;&#x90FD;&#x521B;&#x5EFA;&#x597D;&#x4EE5;&#x540E;&#xFF0C;&#x522B;&#x5FD8;&#x4E86;&#x5728; composer.json &#x6587;&#x4EF6;&#x91CC;&#x52A0;&#x5165;PSR-0&#x7684;&#x81EA;&#x52A8;&#x8F7D;&#x5165;&#x673A;&#x5236;&#xFF1A;</p>
<pre><code class="lang-php"><span class="hljs-string">&quot;autoload&quot;</span>: {
    <span class="hljs-string">&quot;psr-0&quot;</span>:    {
        <span class="hljs-string">&quot;QuickBill&quot;</span>:    <span class="hljs-string">&quot;app/&quot;</span>
    }
}
</code></pre>
<blockquote>
<p>&#x8BD1;&#x8005;&#x6CE8;&#xFF1A;psr-0 &#x4E5F;&#x53EF;&#x4EE5;&#x6539;&#x6210; psr-4&#xFF0C; &quot;psr-4&quot;: { &quot;QuickBill\&quot;: &quot;app/QuickBill&quot; } psr-4 &#x662F;&#x6BD4;&#x8F83;&#x65B0;&#x7684;&#x5EFA;&#x8BAE;&#x6807;&#x51C6;&#xFF0C;&#x548C; psr-0 &#x5177;&#x4F53;&#x6709;&#x4EC0;&#x4E48;&#x533A;&#x522B;&#x8BF7;&#x81EA;&#x884C;&#x68C0;&#x7D22;&#x3002;</p>
</blockquote>
<p>For now, let&apos;s put our Eloquent classes at the root of the QuickBill directory. This will allow us to conveniently access them as QuickBill\User, QuickBill\Payment, etc. In the Repositories folder would belongs classes such as PaymentRepository and UserRepository, which would contain all of our data access functions such as getRecentPayments, and getRichestUser. The Billing directory would contain the classes and interfaces that work with third-party billing services like Stripe and Balanced. The folder structure would look something like this:</p>
<p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x628A;&#x7EE7;&#x627F;&#x81EA; Eloquent &#x7684;&#x6A21;&#x578B;&#x7C7B;&#x90FD;&#x653E;&#x5230; QuickBill &#x76EE;&#x5F55;&#x4E0B;&#x9762;&#x3002;&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x5C31;&#x80FD;&#x5F88;&#x65B9;&#x4FBF;&#x7684;&#x4EE5; QuickBill\User, QuickBill\Payment &#x7684;&#x65B9;&#x5F0F;&#x6765;&#x4F7F;&#x7528;&#x5B83;&#x4EEC;&#x3002;Repositories &#x76EE;&#x5F55;&#x5C5E;&#x4E8E; PaymentRepository &#x548C; UserRepository &#x8FD9;&#x79CD;&#x7C7B;&#xFF0C;&#x91CC;&#x9762;&#x5305;&#x542B;&#x4E86;&#x6240;&#x6709;&#x5BF9;&#x6570;&#x636E;&#x7684;&#x8BBF;&#x95EE;&#x529F;&#x80FD;&#x6BD4;&#x5982; getRecentPayments &#x548C; getRichestUser &#x3002;Billing &#x76EE;&#x5F55;&#x5E94;&#x5F53;&#x5305;&#x542B;&#x8C03;&#x7528;&#x7B2C;&#x4E09;&#x65B9;&#x652F;&#x4ED8;&#x670D;&#x52A1;&#xFF08;&#x5982; Stripe &#x548C; Balanced &#xFF09;&#x7684;&#x7C7B;&#x3002;&#x6574;&#x4E2A;&#x76EE;&#x5F55;&#x7ED3;&#x6784;&#x5E94;&#x8BE5;&#x7C7B;&#x4F3C;&#x8FD9;&#x6837;&#xFF1A;</p>
<pre><code class="lang-php"><span class="hljs-comment">// app</span>
    <span class="hljs-comment">// QuickBill</span>
        <span class="hljs-comment">// Repositories</span>
            -&gt; UserRepository.php
            -&gt; PaymentRepository.php
        <span class="hljs-comment">// Billing</span>
            -&gt; BillerInterface.php
            -&gt; StripeBiller.php
        <span class="hljs-comment">// Notifications</span>
            -&gt; BillingNotifierInterface.php
            -&gt; SmsBillingNotifier.php
        User.php
        Payment.php
</code></pre>
<blockquote>
<h3 id="what-about-validation-&#x6570;&#x636E;&#x9A8C;&#x8BC1;&#x600E;&#x4E48;&#x529E;&#xFF1F;">What About Validation &#x6570;&#x636E;&#x9A8C;&#x8BC1;&#x600E;&#x4E48;&#x529E;&#xFF1F;</h3>
<p>Where to perform validation often stumps developers. Consider placing validation methods on your &quot;entity&quot; classes (like User.php and Payment.php). Possible method name might be: validForCreation or hasValidDomain. Alternatively, you could create a UserValidator class within a Validation namespace and inject that validator into your repository. Experiment with both approaches and see what you like best!</p>
<p>&#x5728;&#x54EA;&#x513F;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x9A8C;&#x8BC1;&#x5E38;&#x5E38;&#x56F0;&#x6270;&#x7740;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x3002;&#x53EF;&#x4EE5;&#x8003;&#x8651;&#x5C06;&#x6570;&#x636E;&#x9A8C;&#x8BC1;&#x65B9;&#x6CD5;&#x5199;&#x8FDB;&#x4F60;&#x7684;&#x201C;&#x5B9E;&#x4F53;&#x201D;&#x7C7B;&#x91CC;&#x9762;&#xFF08;&#x597D;&#x6BD4; User.php &#x548C; Payment.php &#xFF09;&#x3002;&#x65B9;&#x6CD5;&#x540D;&#x53EF;&#x4EE5;&#x8BBE;&#x4E3A; validForCreation &#x6216; hasValidDomain &#x3002;&#x6216;&#x8005;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x4E13;&#x95E8;&#x521B;&#x5EFA;&#x4E2A;&#x9A8C;&#x8BC1;&#x5668;&#x7C7B; UserValidator&#xFF0C;&#x653E;&#x5230; Validation &#x547D;&#x540D;&#x7A7A;&#x95F4;&#x4E0B;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x8FD9;&#x4E2A;&#x9A8C;&#x8BC1;&#x5668;&#x7C7B;&#x6CE8;&#x5165;&#x5230;&#x4F60;&#x7684; repository &#x7C7B;&#x91CC;&#x9762;&#x3002;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#x4F60;&#x90FD;&#x53EF;&#x4EE5;&#x8BD5;&#x8BD5;&#xFF0C;&#x770B;&#x54EA;&#x4E2A;&#x4F60;&#x66F4;&#x559C;&#x6B22;&#xFF01;</p>
</blockquote>
<p>By just getting rid of the models directory, you can often break down mental roadblocks to good design, allowing you to create a directory structure that is more suitable for your application. Of course, each application you build will have some similarities, since each complex application will need a data access (repository) layer, several external service layers, etc.</p>
<p>&#x6446;&#x8131;&#x4E86; models &#x76EE;&#x5F55;&#x540E;&#xFF0C;&#x4F60;&#x901A;&#x5E38;&#x5C31;&#x80FD;&#x514B;&#x670D;&#x5FC3;&#x7406;&#x969C;&#x788D;&#xFF0C;&#x5B9E;&#x73B0;&#x597D;&#x7684;&#x8BBE;&#x8BA1;&#x3002;&#x4F7F;&#x5F97;&#x4F60;&#x80FD;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x66F4;&#x5408;&#x9002;&#x7684;&#x76EE;&#x5F55;&#x7ED3;&#x6784;&#x6765;&#x4E3A;&#x4F60;&#x7684;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x3002;&#x5F53;&#x7136;&#xFF0C;&#x4F60;&#x5EFA;&#x7ACB;&#x7684;&#x6BCF;&#x4E00;&#x4E2A;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x90FD;&#x4F1A;&#x6709;&#x4E00;&#x5B9A;&#x7684;&#x76F8;&#x4F3C;&#x4E4B;&#x5904;&#xFF0C;&#x56E0;&#x4E3A;&#x6BCF;&#x4E2A;&#x590D;&#x6742;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x90FD;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x8BBF;&#x95EE;&#xFF08;repository&#xFF09;&#x5C42;&#xFF0C;&#x4E00;&#x4E9B;&#x5916;&#x90E8;&#x670D;&#x52A1;&#x5C42;&#x7B49;&#x7B49;&#x3002;</p>
<blockquote>
<h3 id="dont-fear-directories-&#x522B;&#x5BB3;&#x6015;&#x76EE;&#x5F55;">Don&apos;t Fear Directories &#x522B;&#x5BB3;&#x6015;&#x76EE;&#x5F55;</h3>
<p>Don&apos;t be afraid to create more directories to organize your application. Always break your application into small components, each having a very focused responsibility. Thinking outside of the &quot;model&quot; box will help. For example, as we previously discussed, you could create a Repositories directory to hold all of your data access classes.</p>
<p>&#x4E0D;&#x8981;&#x60E7;&#x6015;&#x5EFA;&#x7ACB;&#x76EE;&#x5F55;&#x6765;&#x7BA1;&#x7406;&#x5E94;&#x7528;&#x3002;&#x8981;&#x5E38;&#x5E38;&#x5C06;&#x4F60;&#x7684;&#x5E94;&#x7528;&#x5207;&#x5272;&#x6210;&#x5C0F;&#x7EC4;&#x4EF6;&#xFF0C;&#x6BCF;&#x4E00;&#x4E2A;&#x7EC4;&#x4EF6;&#x90FD;&#x8981;&#x6709;&#x5341;&#x5206;&#x4E13;&#x6CE8;&#x7684;&#x804C;&#x8D23;&#x3002;&#x8DF3;&#x51FA;&#x201C;&#x6A21;&#x578B;&#x201D;&#x7684;&#x6846;&#x6846;&#x6765;&#x601D;&#x8003;&#x3002;&#x6BD4;&#x5982;&#x6211;&#x4EEC;&#x4E4B;&#x524D;&#x5C31;&#x8BF4;&#x8FC7;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x4E2A; Repositories &#x76EE;&#x5F55;&#x6765;&#x5B58;&#x653E;&#x4F60;&#x6240;&#x6709;&#x7684;&#x6570;&#x636E;&#x8BBF;&#x95EE;&#x7C7B;&#x3002;</p>
</blockquote>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="5.2_MVC_Is_Killing_You.html" class="navigation navigation-prev " aria-label="Previous page: 5.2 MVC Is Killing You MVC是慢性谋杀">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="5.4_It's_All_About_The_Layers.html" class="navigation navigation-next " aria-label="Next page: 5.4 It's All About The Layers 核心思想就是分层">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"5.3 Bye, Bye Models 再见，模型","level":"1.7.3","depth":2,"next":{"title":"5.4 It's All About The Layers 核心思想就是分层","level":"1.7.4","depth":2,"path":"chapters/5.4_It's_All_About_The_Layers.md","ref":"./chapters/5.4_It's_All_About_The_Layers.md","articles":[]},"previous":{"title":"5.2 MVC Is Killing You MVC是慢性谋杀","level":"1.7.2","depth":2,"path":"chapters/5.2_MVC_Is_Killing_You.md","ref":"./chapters/5.2_MVC_Is_Killing_You.md","articles":[]},"dir":"ltr"},"config":{"plugins":[],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"original Taylor Otwell, translate zgldh","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Laravel - 从百草园到三味书屋","language":"zh-hans","gitbook":"*"},"file":{"path":"chapters/5.3_Bye_Models.md","mtime":"2019-01-07T14:20:39.725Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-01-07T16:06:05.085Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

